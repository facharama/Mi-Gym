{% extends 'home/index.html' %}

{% block inicio %}
{% endblock inicio %}

{% block content %}
<section class="hero">
    <div class="container my-5 hero">
      <div class="card shadow">
        <div class="card-header bg-indigo text-indigo-light">
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3">
            <h3 class="mb-0">Departamentos</h3>
  
            <form method="get" id="filtro-estado" class="mb-3 d-flex align-items-center gap-2">
              <div class="input-group w-auto">
                <label class="input-group-text" for="estado">Estado</label>
                <select 
                  class="form-select" 
                  name="estado" 
                  id="estado" 
                  onchange="document.getElementById('filtro-estado').submit();"
                >
                  <option value="" {% if estado_seleccionado == "" %}selected{% endif %}>Todos</option>
                  <option value="activos" {% if estado_seleccionado == "activos" %}selected{% endif %}>Solo activos</option>
                  <option value="inactivos" {% if estado_seleccionado == "inactivos" %}selected{% endif %}>Solo inactivos</option>
                </select>
              </div>
            
              <div style="width: 34px;">
                {% if estado_seleccionado %}
                  <a 
                    href="{% url 'lista-departamentos' %}" 
                    class="btn btn-outline-secondary btn-sm px-2 py-0 d-flex align-items-center justify-content-center"
                    title="Limpiar filtro"
                    style="height: 100%;"
                  >
                    ✖
                  </a>
                {% endif %}
              </div>
            </form>
  
            <a href="{% url 'departamento_create' %}" class="btn btn-sm btn-indigo">
              ➕ Nuevo departamento
            </a>
          </div>
        </div>
  
        <div class="card-body">
          <ul class="list-group list-group-flush">
            {% for departamento in object_list %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div><span>{{ departamento }}</span></div>
              <div class="d-flex gap-2">
                <a href="{% url 'departamento_detail' departamento.pk %}" class="btn btn-sm btn-outline-primary" title="Ver">
                  <i class="bi bi-search"></i>
                </a>
                <a href="{% url 'departamento_update' departamento.pk %}" class="btn btn-sm btn-outline-success" title="Editar">
                  <i class="bi bi-pencil"></i>
                </a>
                <a href="{% url 'departamento_delete' departamento.pk %}" class="btn btn-sm btn-outline-danger" title="Eliminar">
                  <i class="bi bi-trash"></i>
                </a>
              </div>
            </li>
            {% empty %}
            <li class="list-group-item">No hay departamentos registrados con ese filtro aplicado.</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </section>
  {% endblock %}